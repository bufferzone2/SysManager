CREATE OR ALTER PROCEDURE CITESTEARTICOLE_GRUPA (MY_PARAM INTEGER)
 RETURNS (ID INTEGER, NUME VARCHAR(100), PROD_TVA_VAL NUMERIC(8,2), BRUT NUMERIC(8,2), TVA_PROCENT NUMERIC(5,2), CALE_IMAGE VARCHAR(300), SHOW_IMAGE NUMERIC(2), TVA_ID INTEGER, COD_SGR VARCHAR(16), U_MASURA VARCHAR(10), ID_DEP NUMERIC(2), ID_TVA_AMEF NUMERIC(2))
AS BEGIN
  IF (:MY_PARAM IS NOT NULL) THEN
  BEGIN
    FOR SELECT
      P.ID, P.NUME, P.PROD_TVA_VAL, P.BRUT, T.TVA_VAL AS TVA_PROCENT, P.CALE_IMAGE, P.SHOW_IMAGE, P.TVA_ID, P.COD_SGR, M.PRESCURTARE AS U_MASURA
, P.DEPARTAMENT, T.CASA_GRUPA
    FROM SM_PRODUSE P
    INNER JOIN SM_TVA T ON P.TVA_ID = T.ID
    INNER JOIN SM_UNITATI_MASURA M ON P.UM = M.ID
    WHERE P.GRUPA_ID = :MY_PARAM order by P.NUME ASC
    INTO :ID, :NUME, :PROD_TVA_VAL, :BRUT, :TVA_PROCENT, :CALE_IMAGE, :SHOW_IMAGE, :TVA_ID, :COD_SGR, :U_MASURA
, :ID_DEP, :ID_TVA_AMEF
    DO
      SUSPEND;
  END
END